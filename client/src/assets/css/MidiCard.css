/* client/src/assets/css/MidiCard.css */
.midi-card {
  background-color: var(--color-background-medium);
  border-radius: var(--border-radius-lg); /* Slightly larger radius */
  box-shadow: var(--shadow-md);
  overflow: hidden; /* QUAN TRỌNG: Để dải băng "Private" được cắt đúng cách */
  display: flex;
  flex-direction: column;
  transition: transform var(--transition-medium) cubic-bezier(0.25, 0.8, 0.25, 1),
              box-shadow var(--transition-medium) cubic-bezier(0.25, 0.8, 0.25, 1);
  position: relative; /* Cho dải băng "Private" và các overlay khác */
  border: 1px solid var(--color-border); /* Subtle border */
}

.midi-card:hover {
  transform: translateY(-6px) scale(1.015); /* More pronounced hover effect */
  box-shadow: var(--shadow-xl);
  border-color: var(--color-border-hover);
}

.card-link-wrapper {
  text-decoration: none;
  color: inherit;
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  cursor: pointer; /* Indicate it's clickable */
}

.midi-card-thumbnail-container {
  position: relative;
  width: 100%;
  padding-top: 60%; /* Aspect ratio (e.g., 5:3). Adjust as needed. */
  background-color: var(--color-background-light); /* Darker placeholder */
  overflow: hidden; /* Đảm bảo thumbnail không tràn ra ngoài */
}

.midi-card-thumbnail {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1), filter 0.3s ease-in-out; /* Smoother zoom and filter */
  filter: brightness(0.9) contrast(1.1); /* Slight image enhancement */
}
.midi-card:hover .midi-card-thumbnail {
  transform: scale(1.12);
  filter: brightness(1) contrast(1);
}

.thumbnail-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(to top, rgba(15, 23, 42, 0.85) 0%, rgba(15, 23, 42, 0.4) 40%, transparent 70%);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity var(--transition-medium);
  pointer-events: none;
}
.midi-card:hover .thumbnail-overlay {
  opacity: 1;
}
/* .play-icon-overlay (Nếu bạn có icon play lớn trên thumbnail khi hover) */
/*
.play-icon-overlay {
  font-size: 3.5rem;
  color: rgba(255, 255, 255, 0.9);
  text-shadow: 0 2px 8px rgba(0,0,0,0.5);
  transform: scale(0.8);
  opacity: 0;
  transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.3s ease-out;
  transition-delay: 0.1s;
}
.midi-card:hover .play-icon-overlay {
  transform: scale(1);
  opacity: 1;
}
*/

.midi-card-content {
  padding: var(--spacing-lg);
  flex-grow: 1;
  display: flex;
  flex-direction: column;
}

.midi-card-title {
  font-family: var(--font-display);
  font-size: 1.375rem; /* ~22px */
  font-weight: 700;
  color: var(--color-text-light);
  margin-bottom: var(--spacing-xs);
  line-height: 1.3;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  min-height: calc(1.3em * 2);
  transition: color var(--transition-fast);
}
.card-link-wrapper:hover .midi-card-title {
  color: var(--color-primary);
}

.midi-card-artist,
.midi-card-arrangement {
  font-size: 0.9375rem; /* 15px */
  color: var(--color-text-dark);
  margin-bottom: var(--spacing-xs);
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.midi-card-artist .icon,
.midi-card-arrangement .icon {
  color: var(--color-text-muted);
  font-size: 0.9em;
  flex-shrink: 0;
}

.midi-card-details {
  font-size: 0.875rem; /* 14px */
  color: var(--color-text-muted);
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-sm) var(--spacing-md);
  margin-top: var(--spacing-sm);
  margin-bottom: auto; /* Push footer down */
  padding-bottom: var(--spacing-sm);
}
.midi-card-details span {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-xs);
}
.midi-card-details .icon {
  margin-right: 0.15rem;
  font-size: 0.9em;
}

.midi-card-footer {
  padding: var(--spacing-sm) var(--spacing-lg);
  border-top: 1px solid var(--color-border);
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: rgba(15, 23, 42, 0.3); /* Slightly darker footer */
}

.midi-card-stats {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-md);
  font-size: 0.8125rem; /* 13px */
  color: var(--color-text-dark);
  align-items: center;
}
.midi-card-stats span {
  display: inline-flex;
  align-items: center;
  gap: 0.3rem;
}
.midi-card-stats .icon {
  font-size: 0.9rem;
  color: var(--color-text-muted);
}

.midi-card-actions {
  display: flex;
  gap: var(--spacing-sm);
}

.btn-card {
  padding: var(--spacing-xs) var(--spacing-sm);
  font-size: 0.8125rem; /* 13px */
  border-radius: var(--border-radius-sm);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.3rem;
  font-weight: 600;
  min-width: 36px;
  min-height: 36px;
  transition: var(--transition-default), transform 0.1s ease-out;
  border: 1px solid transparent; /* Base border for consistency */
}
.btn-card:hover:not(:disabled) { /* Added :not(:disabled) */
    transform: scale(1.05);
}
.btn-card:active:not(:disabled) { /* Added :not(:disabled) */
    transform: scale(0.98);
}
.btn-card:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    /* transform: none; */ /* Không cần thiết vì hover/active sẽ không áp dụng */
}


.btn-download-card {
  background-color: var(--color-primary);
  color: var(--color-background-dark);
  border-color: var(--color-primary); /* Thêm border color */
}
.btn-download-card:hover:not(:disabled) {
  background-color: var(--color-primary-hover);
  border-color: var(--color-primary-hover);
}

.btn-view-card {
  background-color: transparent;
  color: var(--color-text-medium);
  border: 1px solid var(--color-border);
}
.btn-view-card:hover:not(:disabled) {
  background-color: var(--color-background-light);
  color: var(--color-text-light);
  border-color: var(--color-border-hover);
}

.midi-card-actions .btn-play-card {
  background-color: var(--color-secondary);
  color: var(--color-text-light);
  border-color: var(--color-secondary-hover);
}
.midi-card-actions .btn-play-card:hover:not(:disabled) {
  background-color: var(--color-secondary-hover);
}
.midi-card-actions .btn-play-card:disabled {
    background-color: var(--color-background-light);
    color: var(--color-text-disabled);
    border-color: var(--color-border);
    opacity: 0.7; /* Có thể điều chỉnh opacity cho nút disabled */
}

.midi-card-error-placeholder {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 200px;
    border: 1px dashed var(--color-error);
    color: var(--color-error);
    text-align: center;
    padding: var(--spacing-md);
}


/* --- STYLES FOR PRIVATE MIDI CARD --- */
.midi-card-private {
  /* Ví dụ 1: Border trái để chỉ thị */
  border-left: 5px solid var(--color-secondary); /* Hoặc một màu khác như var(--color-warning) */
  /* background-color: #283342; */ /* Nền hơi khác một chút nếu muốn */
}

/* Ví dụ 2: Dải băng "Private" */
.private-indicator-banner {
  position: absolute;
  top: 12px; /* Điều chỉnh vị trí từ trên xuống */
  right: -38px; /* Điều chỉnh để xoay và nằm ở góc */
  background-color: var(--color-secondary); /* Màu của dải băng */
  color: var(--color-text-light);
  padding: 4px 40px; /* Padding cho dải băng, rộng hơn để chữ vừa */
  font-size: 0.7rem; /* Chữ nhỏ hơn */
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  transform: rotate(45deg);
  transform-origin: center; /* Xoay quanh tâm */
  box-shadow: 0 2px 4px rgba(0,0,0,0.3);
  z-index: 5; /* Đảm bảo nổi lên trên */
  width: 160px; /* Chiều rộng của dải băng */
  text-align: center;
  line-height: 1.4;
  pointer-events: none; /* Để không cản click vào card */
}
.private-indicator-banner svg {
  margin-right: 3px;
  font-size: 0.9em;
  vertical-align: baseline; /* Căn chỉnh icon tốt hơn */
}

/* Ví dụ 3: Icon khóa nhỏ cạnh title */
.midi-card-title .title-lock-icon {
  font-size: 0.8em; /* Kích thước icon so với title */
  color: var(--color-text-dark); /* Màu cho icon khóa */
  margin-right: var(--spacing-xs);
  vertical-align: middle; /* Căn giữa với text */
  display: inline-block; /* Để margin có tác dụng */
}

/* Tùy chọn: Làm mờ nhẹ thumbnail cho MIDI private */
.midi-card-private .midi-card-thumbnail {
  /* filter: brightness(0.75) saturate(0.8); */ /* Giảm độ sáng và bão hòa */
  /* opacity: 0.85; */
}
.midi-card-private:hover .midi-card-thumbnail {
  /* filter: brightness(0.9) saturate(1); */ /* Tăng lại một chút khi hover */
  /* opacity: 1; */
}

/* Điều chỉnh nút bị vô hiệu hóa trên card private nếu cần */
.midi-card-private .btn-card:disabled {
  /* Nếu muốn style khác với nút disabled thông thường */
  /* background-color: var(--color-background-light) !important; */
  /* color: var(--color-text-muted) !important; */
  /* opacity: 0.4 !important; */
}